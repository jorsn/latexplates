\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{IEEEtranSetup}[2023-08-15 v0.1.1 IEEEtran quick setup options]

\newif\ifonecol
\newif\iftwocol

\twocolfalse


\DeclareOption{onecolumn}{
  \onecoltrue\twocolfalse
}
\DeclareOption{twocolumn}{
  \onecolfalse\twocoltrue
}

\ProcessOptions\relax

\ifonecol
  \PassOptionsToClass{onecolumn}{IEEEtran}
  % IEEEtran onecolumn width is ugly and unergonomic
  \providecommand{\CLASSINPUTtoptextmargin}{3cm}
  \providecommand{\CLASSINPUTbottomtextmargin}{3cm}
  \providecommand{\CLASSINPUTinnersidemargin}{2cm}
  \providecommand{\CLASSINPUToutersidemargin}{6cm}

  \AtBeginDocument{
    \ifcsname CLASSINPUToutersidemargin\endcsname
      \marginparwidth = \dimexpr\CLASSINPUToutersidemargin - 1cm
    \fi
    \marginparpush = 1.5ex
  }
\else
  \PassOptionsToClass{twocolumn}{IEEEtran}
\fi

\NewExpandableDocumentCommand \onecol {+m} {\ifonecol#1\fi}
\NewExpandableDocumentCommand \twocol {+m} {\iftwocol#1\fi}
